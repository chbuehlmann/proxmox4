# file generated by puppet
# Don't edit, please see https://forge.puppetlabs.com/gardouille/proxmox

# The main network interface
auto eth0
iface eth0 inet dhcp
  # Need to delete routes creates for venet interfaces
  up ip route flush table main
  # Add the default gateway throught eth0
  # <%= scope.lookupvar('::ipaddress_eth0') %>
  up ip route add default dev eth0
  up ip route add <%= scope.lookupvar('::network_eth0') %>/<%= scope.lookupvar('::netmask_eth0') %> dev eth0 protocol kernel src <%= scope.lookupvar('::ipaddress_eth0') %>
  up ip route add <%= scope.lookupvar('::vznetwork_venet0_0') %>/<%= scope.lookupvar('::vznetmask_venet0_0') %> dev venet0
  down ip route del default dev eth0
  down ip route del <%= scope.lookupvar('::vznetwork_venet0_0') %>/<%= scope.lookupvar('::vznetmask_venet0_0') %> dev venet0
